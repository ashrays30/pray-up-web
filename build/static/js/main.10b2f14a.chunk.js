(this["webpackJsonppray-up-web"]=this["webpackJsonppray-up-web"]||[]).push([[0],{52:function(e,t,c){},66:function(e,t,c){},73:function(e,t,c){"use strict";c.r(t);var a=c(1),n=c.n(a),r=c(30),s=c.n(r),i=c(31),j=(c(66),c(17)),l=(c(52),c(0)),o=c.n(l),b=c(3),d=c(12),u=c(76),O=c(77),h=c(57),p=c(78),x=c(82),m=c(79),f=c(23),y=c.p+"static/media/app_logo.e611d42b.jpg",g=c(16),v=c(56),N=(Object(v.a)({apiKey:"AIzaSyCbAu78CKZIFUqVhGurZxXfs0tYjv7M080",authDomain:"prayup-9fe0f.firebaseapp.com",projectId:"prayup-9fe0f",storageBucket:"prayup-9fe0f.appspot.com",messagingSenderId:"175364976092",appId:"1:175364976092:web:65a5faa819c0e1d06db319",measurementId:"G-7GP68PV1XK"}),c(4)),C=function(){var e=Object(a.useState)(""),t=Object(d.a)(e,2),c=t[0],n=t[1],r=Object(a.useState)(""),s=Object(d.a)(r,2),i=s[0],l=s[1],v=Object(j.f)(),C=Object(f.b)(),S=Object(g.i)();return Object(N.jsx)(u.a,{children:Object(N.jsx)("div",{children:Object(N.jsxs)(O.a,{children:[Object(N.jsx)(h.a,{md:{span:6,offset:3},children:Object(N.jsx)(p.a,{src:y,rounded:!0,style:{height:400,width:350,marginLeft:70}})}),Object(N.jsx)(h.a,{md:{span:6,offset:3},children:Object(N.jsxs)(x.a,{children:[Object(N.jsxs)(x.a.Group,{className:"mb-3",controlId:"formBasicEmail",children:[Object(N.jsx)(x.a.Label,{children:"Email address"}),Object(N.jsx)(x.a.Control,{type:"email",placeholder:"Enter email",onChange:function(e){return n(e.target.value)},value:c})]}),Object(N.jsxs)(x.a.Group,{className:"mb-3",controlId:"formBasicPassword",children:[Object(N.jsx)(x.a.Label,{children:"Password"}),Object(N.jsx)(x.a.Control,{type:"password",placeholder:"Password",onChange:function(e){return l(e.target.value)},value:i})]}),Object(N.jsx)(m.a,{variant:"primary",type:"button",onClick:function(){Object(f.e)(C,c,i).then(function(){var e=Object(b.a)(o.a.mark((function e(t){var c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=Object(g.k)(Object(g.a)(S,"userdata"),Object(g.p)("uid","==",t.user.uid)),e.next=3,Object(g.f)(c);case 3:e.sent.forEach((function(e){var t=e.data();sessionStorage.setItem("userData",JSON.stringify(t)),"admin"===t.type?v("/users"):"Chapter Leader"===t.type?v("/chatGroup"):console.log("not a valid user")}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){var t=e.code,c=e.message;console.log(t,c)}))},children:"Submit"})]})})]})})})},S=c(7),k=c(33),w=Object(f.b)(),G=Object(g.i)();function L(e){var t=e.message,c=e.currentUser,a=t.text,n=t.uid,r=(t.photoURL,t.user),s=n===c.uid?"sent":"received";return Object(N.jsx)(N.Fragment,{children:Object(N.jsxs)("div",{className:"message ".concat(s),children:[Object(N.jsx)("div",{className:"circle",style:{width:"3.5rem",height:"3.5rem"},children:Object(N.jsx)("span",{className:"initials",style:{fontSize:"2rem",top:"0.7rem"},children:r.name.match(/(\b\S)?/g).join("").match(/(^\S|\S$)?/g).join("").toUpperCase()})}),Object(N.jsx)("p",{children:a})]})})}var A=function(){var e=Object(j.e)(),t=Object(k.a)(w),c=Object(d.a)(t,1)[0],n=Object(a.useState)([]),r=Object(d.a)(n,2),s=r[0],i=r[1],l=Object(a.useState)(null),o=Object(d.a)(l,2),b=o[0],p=o[1],x=e.state.id,m=Object(g.a)(G,"rooms",x,"messages"),f=Object(g.b)(G,"rooms",x);Object(a.useEffect)((function(){var e=Object(g.j)(m,(function(e){var t=e.docChanges().filter((function(e){return"added"===e.type})).map((function(e){var t=e.doc.data();return Object(S.a)(Object(S.a)({},t),{},{createdAt:t.createdAt.toDate()})})).sort((function(e,t){return e.createdAt.getTime()-t.createdAt.getTime()}));y(t)}));return Object(g.c)(f).then((function(e){console.log(e.data()),p(e.data())})),function(){return e()}}),[]);var y=Object(a.useCallback)((function(e){i(e)}),[s]);return Object(N.jsxs)(u.a,{className:"chatSection",children:[Object(N.jsx)("h1",{children:"Participants"}),Object(N.jsx)("br",{}),Object(N.jsx)(O.a,{children:b&&b.participants.map((function(e,t){return console.log(e),Object(N.jsxs)(h.a,{md:3,id:t,children:[Object(N.jsx)("div",{className:"circle",style:{width:"3.5rem",height:"3.5rem"},children:Object(N.jsx)("span",{className:"initials",style:{fontSize:"2rem",top:"0.7rem"},children:e.displayName.match(/(\b\S)?/g).join("").match(/(^\S|\S$)?/g).join("").toUpperCase()})}),"".concat(e.displayName," (").concat(e.type,")")]})}))}),Object(N.jsx)("br",{}),Object(N.jsx)("hr",{}),Object(N.jsx)(O.a,{children:Object(N.jsx)(h.a,{children:s&&s.map((function(e){return Object(N.jsx)(L,{message:e,currentUser:c},e.id)}))})})]})},B=c(85),I=c(35),T=Object(f.b)(),U=Object(I.i)(),E=function(){var e=Object(k.a)(T),t=Object(d.a)(e,1)[0],c=Object(a.useState)([]),n=Object(d.a)(c,2),r=n[0],s=n[1],i=Object(j.f)(),l=Object(I.k)(Object(I.a)(U,"rooms"),Object(I.p)("participantsArray","array-contains",t.email));return Object(a.useEffect)((function(){var e=Object(I.j)(l,(function(e){var c=e.docs.map((function(e){return Object(S.a)(Object(S.a)({},e.data()),{},{id:e.id,userB:e.data().participants.find((function(e){return e.email!==t.email}))})}));s(c.filter((function(e){return e.lastMessage})))}));return function(){return e()}}),[]),Object(N.jsx)(u.a,{children:Object(N.jsxs)("div",{children:[Object(N.jsx)(O.a,{children:Object(N.jsx)(h.a,{md:"auto",style:{padding:10},children:Object(N.jsx)("h1",{children:" All Charts "})})}),r.map((function(e,t){return Object(N.jsx)("div",{style:{padding:10},children:Object(N.jsxs)(O.a,{children:[Object(N.jsx)(h.a,{xs:!0,lg:"2",children:Object(N.jsx)("div",{className:"circle",children:Object(N.jsx)("span",{className:"initials",children:e.userB.displayName.match(/(\b\S)?/g).join("").match(/(^\S|\S$)?/g).join("").toUpperCase()})})}),Object(N.jsx)(h.a,{xs:6,children:Object(N.jsx)(B.a,{onClick:function(){i("/chat",{state:{id:e.id}})},style:{width:500},children:Object(N.jsxs)(B.a.Body,{children:[e.groupName?Object(N.jsx)(B.a.Title,{children:"".concat(e.userB.displayName," (Group: ").concat(e.groupName,")")}):Object(N.jsx)(B.a.Title,{children:"".concat(e.userB.displayName)}),Object(N.jsx)(B.a.Subtitle,{className:"mb-2 text-muted",children:e.lastMessage.text})]})})})]})},t)}))]})})},M=c(80),P=c(48),V=Object(g.i)(),D=function(){var e=Object(g.a)(V,"userdata"),t=Object(P.a)(e),c=Object(d.a)(t,1)[0],a=Object(j.f)(),n=function(){var e=Object(b.a)(o.a.mark((function e(t,c){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=Object(g.b)(V,"userdata",t),e.next=4,Object(g.n)(V,function(){var e=Object(b.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.get(a);case 2:e.sent.exists()||console.log("Document does not exist!"),t.update(a,{type:c});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 4:console.log("Transaction successfully committed!"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log("Transaction failed: ",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,c){return e.apply(this,arguments)}}();return Object(N.jsx)(u.a,{children:Object(N.jsxs)("div",{children:[Object(N.jsx)("br",{}),Object(N.jsxs)(O.a,{children:[Object(N.jsx)(h.a,{sm:10,children:Object(N.jsx)("h1",{children:"User Data"})}),Object(N.jsx)(h.a,{sm:2,children:Object(N.jsx)(m.a,{onClick:function(){a("/chatList")},variant:"outline-dark",children:"Go To All Chats"})})]}),Object(N.jsx)("hr",{}),Object(N.jsx)(O.a,{children:Object(N.jsx)(h.a,{children:Object(N.jsxs)(M.a,{striped:!0,bordered:!0,hover:!0,style:{textAlign:"center"},children:[Object(N.jsx)("thead",{children:Object(N.jsxs)("tr",{children:[Object(N.jsx)("th",{children:"First Name"}),Object(N.jsx)("th",{children:"Phone Number"}),Object(N.jsx)("th",{children:"Type"}),Object(N.jsx)("th",{children:"Action"})]})}),Object(N.jsx)("tbody",{children:c&&c.map((function(e,t){return"admin"!==e.type&&Object(N.jsxs)("tr",{id:t,children:[Object(N.jsx)("td",{children:e.displayName}),Object(N.jsx)("td",{children:e.phone}),Object(N.jsx)("td",{children:e.type}),Object(N.jsxs)("td",{children:[Object(N.jsx)(m.a,{onClick:function(){return n(e.uid,"Volunteer")},variant:"success",disabled:"Volunteer"===e.type,children:"Make Volunteer"})," ",Object(N.jsx)(m.a,{onClick:function(){return n(e.uid,"Chapter Leader")},variant:"primary",disabled:"Chapter Leader"===e.type,children:"Make Chapter Leader"})]})]})}))})]})})})]})})},F=c(20),J=c(83),$=c(81),z=c(84),K=Object(f.b)(),H=Object(g.i)(),X=function(){var e=Object(z.a)(),t=Object(g.k)(Object(g.a)(H,"userdata")),c=Object(P.a)(t),n=Object(d.a)(c,1)[0],r=Object(k.a)(K),s=Object(d.a)(r,1)[0],i=Object(j.f)(),l=Object(a.useState)([]),p=Object(d.a)(l,2),f=p[0],y=p[1],v=Object(a.useState)(!1),C=Object(d.a)(v,2),S=C[0],w=C[1],G=Object(a.useState)(""),L=Object(d.a)(G,2),A=L[0],B=L[1];console.log(e);var I=function(){var t=Object(b.a)(o.a.mark((function t(){var c,a;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=JSON.parse(sessionStorage.getItem("userData")),a=Object(g.b)(H,"rooms",e),t.next=4,Object(g.o)(a,{groupName:A,type:"group",participants:[].concat(Object(F.a)(T()),Object(F.a)(U()),[{displayName:s.displayName,email:s.email.toLowerCase(),type:c.type}]),participantsArray:[].concat(Object(F.a)(T().map((function(e){return e.email}))),Object(F.a)(U().map((function(e){return e.email}))),[s.email])});case 4:i("/chatGroup");case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),T=function(){return f.map((function(e){return{displayName:e.displayName,email:e.email.toLowerCase(),type:e.type}}))},U=function(){return n.filter((function(e){return"admin"===e.type})).map((function(e){return{displayName:e.displayName,email:e.email.toLowerCase(),type:e.type}}))};return Object(N.jsxs)(u.a,{children:[Object(N.jsxs)("div",{children:[Object(N.jsx)("br",{}),Object(N.jsxs)(O.a,{children:[Object(N.jsx)(h.a,{sm:10,children:Object(N.jsx)("h1",{children:"List Of Volunteer"})}),Object(N.jsx)(h.a,{sm:2,children:Object(N.jsx)(m.a,{onClick:function(){w(!0),console.log(f)},variant:"outline-dark",children:"Create Group"})})]}),Object(N.jsx)("hr",{}),Object(N.jsx)(O.a,{children:Object(N.jsx)(h.a,{children:Object(N.jsx)(J.a,{children:n&&n.map((function(e,t){return"Volunteer"===e.type&&Object(N.jsx)(J.a.Item,{children:Object(N.jsx)(x.a.Check,{label:"".concat(e.displayName," (").concat(e.email,")"),onChange:function(){return function(e){var t=Object(F.a)(f),c=t.indexOf(e);-1===c?t.push(e):t.splice(c,1),y(t)}(e)},checked:f.filter((function(t){return t.email===e.email})).length})},t)}))})})})]}),Object(N.jsxs)($.a,{show:S,onHide:function(){return w(!1)},children:[Object(N.jsx)($.a.Header,{closeButton:!0,children:Object(N.jsx)($.a.Title,{children:"Group Name"})}),Object(N.jsx)($.a.Body,{children:Object(N.jsx)(x.a.Control,{type:"Text",placeholder:"Enter Group Name",value:A,onChange:function(e){return B(e.target.value)}})}),Object(N.jsx)($.a.Footer,{children:Object(N.jsx)(m.a,{variant:"primary",onClick:function(){return I()},disabled:!(A.length>1),children:"Create"})})]})]})},Z=Object(g.i)(),q=Object(f.b)(),R=function(){var e=Object(k.a)(q),t=Object(d.a)(e,1)[0],c=Object(g.k)(Object(g.a)(Z,"rooms"),Object(g.p)("type","==","group"),Object(g.p)("participantsArray","array-contains",t.email)),n=Object(a.useState)([]),r=Object(d.a)(n,2),s=r[0],i=r[1];Object(a.useEffect)((function(){var e=Object(g.j)(c,(function(e){var c=e.docs.map((function(e){return Object(S.a)(Object(S.a)({},e.data()),{},{id:e.id,userB:e.data().participants.find((function(e){return e.email!==t.email}))})}));i(c)}));return function(){return e()}}),[]);var l=Object(j.f)();return console.log(s),Object(N.jsx)(u.a,{children:Object(N.jsxs)("div",{children:[Object(N.jsx)("br",{}),Object(N.jsxs)(O.a,{children:[Object(N.jsx)(h.a,{sm:10,children:Object(N.jsx)("h1",{children:"User Groups"})}),Object(N.jsx)(h.a,{sm:2,children:Object(N.jsx)(m.a,{onClick:function(){l("/userGroup")},variant:"outline-dark",children:"Create Group"})})]}),Object(N.jsx)("hr",{}),Object(N.jsx)(O.a,{children:Object(N.jsx)(h.a,{children:s&&s.map((function(e,t){return Object(N.jsx)("div",{style:{padding:10},children:Object(N.jsxs)(O.a,{children:[Object(N.jsx)(h.a,{xs:!0,lg:"2",children:Object(N.jsx)("div",{className:"circle",children:Object(N.jsx)("span",{className:"initials",children:e.groupName.match(/(\b\S)?/g).join("").match(/(^\S|\S$)?/g).join("").toUpperCase()})})}),Object(N.jsx)(h.a,{xs:6,children:Object(N.jsx)(B.a,{onClick:function(){l("/chat",{state:{id:e.id}})},style:{width:500},children:Object(N.jsxs)(B.a.Body,{children:[Object(N.jsx)(B.a.Title,{children:e.groupName}),Object(N.jsx)(B.a.Subtitle,{className:"mb-2 text-muted",children:e.lastMessage?e.lastMessage.text:""})]})})})]})},t)}))})})]})})};c(72);var Y=function(){return Object(N.jsxs)(j.c,{children:[Object(N.jsx)(j.a,{exact:!0,path:"/",element:Object(N.jsx)(C,{})}),Object(N.jsx)(j.a,{path:"/chatList",element:Object(N.jsx)(E,{})}),Object(N.jsx)(j.a,{path:"/chat",element:Object(N.jsx)(A,{})}),Object(N.jsx)(j.a,{path:"/users",element:Object(N.jsx)(D,{})}),Object(N.jsx)(j.a,{path:"/userGroup",element:Object(N.jsx)(X,{})}),Object(N.jsx)(j.a,{path:"/chatGroup",element:Object(N.jsx)(R,{})})]})};s.a.render(Object(N.jsx)(n.a.StrictMode,{children:Object(N.jsx)(i.a,{children:Object(N.jsx)(Y,{})})}),document.getElementById("root"))}},[[73,1,2]]]);
//# sourceMappingURL=main.10b2f14a.chunk.js.map